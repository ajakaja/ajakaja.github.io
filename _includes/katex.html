
<!-- hacks to easily use KateX instead of MathJax because it's smaller and doesn't reflow the page. Can't vouch for these really -->
<script>
function renderWithErrors(tex, displayMode) {
  try { 
    return katex.renderToString(tex, {
      displayMode: displayMode,
      throwOnError: false,
      macros: {
        "\\d": "\\delta",
        "\\D": "\\Delta",
        "\\p": "\\partial",
        "\\b": "\\mathbf",
        "\\bb": "\\mathbb",
        "\\cal": "\\mathcal",
        "\\ola": "\\overleftarrow",
        "\\ora": "\\overrightarrow",
        "\\ra": "\\rightarrow",
        "\\lra": "\\leftrightarrow",
        "\\Ra": "\\Rightarrow",
        "\\Lra": "\\Leftrightarrow"
      }
    }); 

  } catch (e) {
    return "<span class='texerror'>" + e.message + "</span>";
  }
};
$("script[type='math/tex']").replaceWith(
  function(){
    var tex = $(this).text()
      .replace("% <![CDATA[", "")
      .replace("%]]>", "");
    return "<span class=\"inline-equation\">" + 
           renderWithErrors(tex, false) +
           "</span>";
});
$("script[type='math/tex; mode=display']").replaceWith(
  function(){
    var tex = $(this).text()
      .replace("% <![CDATA[", "")
      .replace("%]]>", "");
    return "<div class=\"equation\">" + 
           renderWithErrors(tex, true) +
           "</div>";
});</script>